server {
    listen 80 default_server;
    listen [::]:80 default_server;
    server_name localhost;

    index index.php index.html;
    error_log  /var/log/nginx/error.log;
    access_log /var/log/nginx/access.log;
    root /var/www/html;


    # 代理設定
    #location /proxy_path {
    #  rewrite /proxy_path/(.+)$ /$1 break;
    #
    #  proxy_pass http://{container_name};
    #  proxy_http_version 1.1;
    #  proxy_set_header Upgrade $http_upgrade;
    #  proxy_set_header Connection 'upgrade';
    #  proxy_set_header Host $host;
    #  proxy_cache_bypass $http_upgrade;
    #}


    # Nextjs 代理範例
    location /accessory-sys/ipay {
          rewrite /accessory-sys/ipay/static/(.+)$ /static/$1 break;
          rewrite /accessory-sys/ipay/_next/(.+)$ /_next/$1 break;

          proxy_pass http://180403-ipay:3001;

          include /etc/nginx/sites-module/proxy.conf;
    }

}
